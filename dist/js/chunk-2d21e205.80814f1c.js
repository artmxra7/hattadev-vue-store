(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e205"],{d3dd:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"holder holder_white mar-b-1"},[e.isAuthorized?e._e():s("h2",{staticClass:"mar-b-2"},[e._v(e._s(e.$t("header.toRegister")))]),e.isAuthorized?s("h2",{staticClass:"mar-b-2"},[e._v(e._s(e.$t("profile.editProfile")))]):e._e(),s("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUserProfile()}}},[s("md-field",[s("label",[e._v("Anrede")]),s("md-select",{model:{value:e.customer.salutationId,callback:function(t){e.$set(e.customer,"salutationId",t)},expression:"customer.salutationId"}},e._l(e.salutations,(function(t,r,a){return s("md-option",{key:a,attrs:{value:t}},[e._v(e._s(r)+" ")])})),1)],1),s("md-field",{class:e.getValidationClass("customer","firstName")},[s("label",[e._v(e._s(e.$t("auth.firstName"))+"*")]),s("md-input",{model:{value:e.customer.firstName,callback:function(t){e.$set(e.customer,"firstName",t)},expression:"customer.firstName"}}),e.$v.customer.firstName.required?e.$v.customer.firstName.minlength?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.firstName"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.firstName"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1),s("md-field",{class:e.getValidationClass("customer","lastName")},[s("label",[e._v(e._s(e.$t("auth.lastName"))+"*")]),s("md-input",{model:{value:e.customer.lastName,callback:function(t){e.$set(e.customer,"lastName",t)},expression:"customer.lastName"}}),e.$v.customer.lastName.required?e.$v.customer.lastName.minlength?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.lastName"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.lastName"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1),s("md-field",{class:e.getValidationClass("customer","email")},[s("label",[e._v(e._s(e.$t("auth.emailAddress"))+"*")]),s("md-input",{model:{value:e.customer.email,callback:function(t){e.$set(e.customer,"email",t)},expression:"customer.email"}}),e.$v.customer.email.required?e.$v.customer.email?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.emailAddress"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.emailAddress"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1),e.isAuthorized?e._e():s("md-field",{class:e.getValidationClass("customer","password")},[s("label",[e._v(e._s(e.$t("auth.password"))+"*")]),s("md-input",{attrs:{type:"password"},model:{value:e.customer.password,callback:function(t){e.$set(e.customer,"password",t)},expression:"customer.password"}}),e.$v.customer.password.required?e.$v.customer.password?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.emailAddress"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.password"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1),e.isAuthorized?e._e():s("md-field",{class:e.getValidationClass("customer","passwordConfirm")},[s("label",[e._v(e._s(e.$t("auth.passwordConfirm"))+"*")]),s("md-input",{attrs:{type:"password"},model:{value:e.customer.passwordConfirm,callback:function(t){e.$set(e.customer,"passwordConfirm",t)},expression:"customer.passwordConfirm"}}),e.$v.customer.passwordConfirm.required?e.$v.customer.passwordConfirm?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.emailAddress"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.passwordConfirm"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1)],1),s("h2",{staticClass:"mar-b-2 pad-t-2"},[e._v("Rechnungsadresse")]),s("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUserProfile()}}},[s("md-field",[s("label",[e._v("Land*")]),s("md-input",{attrs:{readonly:""},model:{value:e.countryData.name,callback:function(t){e.$set(e.countryData,"name",t)},expression:"countryData.name"}})],1),s("md-field",{class:e.getValidationClass("billingAddress","street")},[s("label",[e._v("Stra√üe*")]),s("md-input",{model:{value:e.billingAddress.street,callback:function(t){e.$set(e.billingAddress,"street",t)},expression:"billingAddress.street"}}),e.$v.billingAddress.street.required?e.$v.billingAddress.street?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.emailAddress"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.streetAddress"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1),s("md-field",{class:e.getValidationClass("billingAddress","zipcode")},[s("label",[e._v("Postleitzahl*")]),s("md-input",{model:{value:e.billingAddress.zipcode,callback:function(t){e.$set(e.billingAddress,"zipcode",t)},expression:"billingAddress.zipcode"}}),e.$v.billingAddress.zipcode.required?e.$v.billingAddress.zipcode?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.emailAddress"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.streetAddress"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1),s("md-field",{class:e.getValidationClass("billingAddress","city")},[s("label",[e._v("Stadt*")]),s("md-input",{model:{value:e.billingAddress.city,callback:function(t){e.$set(e.billingAddress,"city",t)},expression:"billingAddress.city"}}),e.$v.billingAddress.city.required?e.$v.billingAddress.city?e._e():s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.invalid"))+" "+e._s(e.$t("auth.emailAddress"))+" ")]):s("span",{staticClass:"md-error"},[e._v(" "+e._s(e.$t("auth.streetAddress"))+" "+e._s(e.$t("auth.isRequired"))+" ")])],1)],1),s("div",{staticClass:"text-center pad-t-2"},[s("md-button",{staticClass:"radius-block pad-l-2 pad-r-2",attrs:{type:"submit"},on:{click:function(t){return e.validateUserProfile()}}},[e._v(" "+e._s(e.$t("checkout.continue"))+" ")])],1)])},a=[],i=(s("a4d3"),s("4de4"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),d=s("b5ae"),l=s("2f62"),o=s("bc3a"),n=s.n(o),u=s("5fb0"),c=s("edee");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={name:"UserData",mixins:[c["a"]],data:function(){return{salutations:u["a"].AVAILABLE_SALUTATION,isAuthorized:!1,countryData:{name:"",id:""},customer:{firstName:null,lastName:null,salutationId:null,email:null,password:null,passwordConfirm:null},billingAddress:{countryId:null,street:null,zipcode:null,city:null}}},created:function(){this.getContext()},validations:{customer:{firstName:{required:d["required"],minLength:Object(d["minLength"])(3)},lastName:{required:d["required"],minLength:Object(d["minLength"])(3)},email:{required:d["required"],email:d["email"]},password:{required:d["required"],minLength:Object(d["minLength"])(8)},passwordConfirm:{required:d["required"],sameAsPassword:Object(d["sameAs"])("password")}},billingAddress:{countryId:{required:d["required"]},street:{required:d["required"]},zipcode:{required:d["required"],numeric:d["numeric"]},city:{required:d["required"]}}},methods:p({},Object(l["b"])(["updateUserData","updateOrderResult"]),{getValidationClass:function(e,t){var s=this.$v[e][t];return!!s&&{"md-invalid":s.$invalid&&s.$dirty}},validateUserProfile:function(){this.$v.customer.$touch(),this.$v.billingAddress.$touch(),this.registerUser()},getContext:function(){var e=this;n.a.get("http://77.245.20.254/store-api/v3/context",{headers:{"sw-access-key":"SWSCAUPEWFJVU0FVC20WCNDLUG","sw-context-token":localStorage.getItem("contextToken")}}).then((function(t){if(e.countryData.name=t.data.shippingLocation.country.name,e.billingAddress.countryId=t.data.shippingLocation.country.id,t.data.customer){var s=t.data.customer;e.isAuthorized=!!s,e.customer={firstName:s.firstName,lastName:s.lastName,salutationId:s.salutationId,email:s.email},e.billingAddress={countryId:s.activeBillingAddress.countryId,street:s.activeBillingAddress.street,zipcode:s.activeBillingAddress.zipcode,city:s.activeBillingAddress.city}}}))},registerUser:function(){var e=this;if(this.isAuthorized)this.replaceOrder();else if(!this.$v.customer.$invalid&&!this.$v.billingAddress.$invalid){delete this.customer.passwordConfirm;var t=this.billingAddress,s=p({},this.customer,{billingAddress:t});n.a.post("http://77.245.20.254/store-api/v3/axonlab/account/register",s,{headers:{"sw-access-key":"SWSCAUPEWFJVU0FVC20WCNDLUG","sw-context-token":localStorage.getItem("contextToken")}}).then((function(t){e.updateUserData(s),localStorage.setItem("contextToken",t.headers["sw-context-token-al"]),localStorage.setItem("isUserAuthorized",!0),e.replaceOrder()})).catch((function(t){console.error("Error occured on registration ",t),e.$toaster.error(e.$t("notify.oops"))}))}},replaceOrder:function(){var e=this;n.a.post("http://77.245.20.254/store-api/v3/checkout/order",{},{headers:{"sw-access-key":"SWSCAUPEWFJVU0FVC20WCNDLUG","sw-context-token":localStorage.getItem("contextToken")}}).then((function(t){e.$router.push("/checkout/summary"),e.updateOrderResult(t.data),localStorage.setItem("orderId",t.data.id)})).catch((function(t){console.error("Error occured on replase order ",t),e.$toaster.error(e.$t("notify.oops"))}))}})},h=v,f=s("2877"),b=Object(f["a"])(h,r,a,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d21e205.80814f1c.js.map